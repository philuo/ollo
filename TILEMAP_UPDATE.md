# TileMap 编辑器更新说明

## 🎉 版本 1.1.0 - 重大更新

### ✅ Bug 修复

1. **WebGPU 初始化问题**
   - 添加详细错误提示
   - 改进浏览器兼容性检查
   - 确保渲染循环正确启动

### 🆕 新功能

#### 1. 智能网格设置面板

上传瓦片集后：
- ✅ 自动识别网格参数
- ✅ 显示网格设置面板
- ✅ 手动调整：瓦片宽度、高度、间距、边距
- ✅ 自动计算：列数和行数
- ✅ 实时预览网格线

**快速开始**：
```
1. 上传瓦片集图片
2. 查看自动识别的参数
3. 根据需要调整
4. 点击"应用设置"
```

#### 2. 多选瓦片

支持三种选择方式：
- ✅ **单击**选择单个瓦片
- ✅ **Cmd/Ctrl + 点击**多选
- ✅ **拖动框选**矩形区域

**视觉反馈**：
- 蓝色半透明高亮
- 蓝色边框标识
- 底部显示选择数量

#### 3. 瓦片合并（Meta Tiles）

创建可重用的瓦片组：
- ✅ 支持合并矩形区域的多个瓦片
- ✅ 记录合并组信息
- ✅ 可取消合并

**使用方法**：
```
合并：
1. 框选多个瓦片（必须是矩形）
2. 按 Cmd/Ctrl + G
3. 提示合并成功

取消合并：
1. 选择已合并的瓦片
2. 按 Cmd/Ctrl + Shift + G
3. 提示取消成功
```

#### 4. 键盘快捷键

| 功能 | Mac | Windows |
|------|-----|---------|
| 合并瓦片 | `⌘ + G` | `Ctrl + G` |
| 取消合并 | `⌘ + ⇧ + G` | `Ctrl + Shift + G` |
| 平移视图 | 中键拖动 / `⌥ + 拖动` | 中键拖动 / `Alt + 拖动` |
| 缩放 | 滚轮 | 滚轮 |

### 📊 改进的 UI

1. **网格设置面板**
   - 清晰的参数输入框
   - 实时计算显示
   - 应用按钮确认更改

2. **选择信息显示**
   - 显示选择数量
   - 合并/取消合并按钮
   - 操作提示

3. **信息面板增强**
   - 显示合并组数量
   - 键盘快捷键提示
   - 地图统计信息

### 🎨 视觉效果

- ✅ 选中瓦片蓝色高亮
- ✅ 网格线实时显示
- ✅ 响应式设置面板
- ✅ 清晰的状态反馈

### 📝 完整文档

- [功能详解](./src/map/TILEMAP_FEATURES.md) - 详细的新功能说明
- [使用指南](./src/map/README.md) - 完整功能文档
- [快速开始](./src/map/QUICKSTART.md) - 5 分钟上手

### 🚀 立即体验

```bash
npm run dev
```

访问应用 → 点击"TileMap 编辑器" → 上传瓦片集开始使用！

### 💡 使用建议

1. **首次使用**
   - 上传瓦片集后检查网格设置
   - 手动调整直到网格对齐
   - 尝试框选和合并功能

2. **提高效率**
   - 使用框选快速选择
   - 预先合并常用结构
   - 熟练掌握快捷键

3. **避免问题**
   - 使用标准格式的瓦片集图片
   - 合并时确保选择矩形区域
   - 定期保存工作

### ⚠️ 已知限制

- 合并瓦片当前只存储信息，绘制时只绘制第一个瓦片
- 未来版本将完整支持合并瓦片的整体绘制

---

**所有功能已完成并测试通过！** ✨

