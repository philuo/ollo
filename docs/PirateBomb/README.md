# WebGPU ç²¾çµåŠ¨ç”»æ’­æ”¾å™¨ - æŠ€æœ¯æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®åŸºäº **WebGPU** æŠ€æœ¯å®ç°äº†ä¸€ä¸ªç²¾çµåŠ¨ç”»æ’­æ”¾å™¨ï¼Œå¯ä»¥åŠ è½½å’Œæ’­æ”¾ã€ŠPirate Bombã€‹æ¸¸æˆèµ„æºåŒ…ä¸­çš„è§’è‰²åºåˆ—å¸§åŠ¨ç”»ã€‚é¡¹ç›®é‡‡ç”¨ç°ä»£åŒ–çš„æ¶æ„è®¾è®¡ï¼Œä½¿ç”¨ Solid.js ä½œä¸ºå‰ç«¯æ¡†æ¶ï¼ŒTypeScript ä½œä¸ºå¼€å‘è¯­è¨€ã€‚

## æŠ€æœ¯æ ˆ

- **WebGPU**: æ–°ä¸€ä»£å›¾å½¢APIï¼Œæä¾›é«˜æ€§èƒ½çš„GPUæ¸²æŸ“èƒ½åŠ›
- **Solid.js**: å“åº”å¼UIæ¡†æ¶
- **TypeScript**: ç±»å‹å®‰å…¨çš„JavaScriptè¶…é›†
- **Vite**: ç°ä»£åŒ–çš„æ„å»ºå·¥å…·

## é¡¹ç›®ç»“æ„

```
src/scenes/
â”œâ”€â”€ App.tsx                           # ä¸»åº”ç”¨ç»„ä»¶
â”œâ”€â”€ App.css                           # æ ·å¼æ–‡ä»¶
â””â”€â”€ webgpu/
    â”œâ”€â”€ Renderer.ts                   # WebGPU æ¸²æŸ“å™¨æ ¸å¿ƒç±»
    â”œâ”€â”€ TextureLoader.ts              # çº¹ç†åŠ è½½å’Œç®¡ç†
    â”œâ”€â”€ SpriteAnimation.ts            # ç²¾çµåŠ¨ç”»ç³»ç»Ÿ
    â”œâ”€â”€ SpriteRenderer.ts             # ç²¾çµæ¸²æŸ“å™¨
    â””â”€â”€ CharacterController.ts        # è§’è‰²æ§åˆ¶å™¨ï¼ˆç»Ÿä¸€ç®¡ç†ï¼‰
```

## æ ¸å¿ƒæ¨¡å—è¯´æ˜

### 1. Rendererï¼ˆæ¸²æŸ“å™¨ï¼‰

**ä½ç½®**: `src/scenes/webgpu/Renderer.ts`

**èŒè´£**:
- åˆå§‹åŒ–å’Œç®¡ç† WebGPU ä¸Šä¸‹æ–‡
- é…ç½® Canvas æ¸²æŸ“ç¯å¢ƒ
- æä¾›æ¸²æŸ“ç®¡çº¿åˆ›å»ºæ¥å£
- ç®¡ç† GPU è®¾å¤‡å’Œä¸Šä¸‹æ–‡

**å…³é”®æ–¹æ³•**:
- `async init()`: åˆå§‹åŒ– WebGPUï¼Œè¯·æ±‚ GPU é€‚é…å™¨å’Œè®¾å¤‡
- `getDevice()`: è·å– GPU è®¾å¤‡å®ä¾‹
- `getContext()`: è·å– Canvas WebGPU ä¸Šä¸‹æ–‡
- `clear()`: æ¸…é™¤ç”»å¸ƒ
- `createRenderPipeline()`: åˆ›å»ºæ¸²æŸ“ç®¡çº¿

**æŠ€æœ¯è¦ç‚¹**:
- ä½¿ç”¨ `navigator.gpu.requestAdapter()` è¯·æ±‚ GPU é€‚é…å™¨
- é…ç½® Canvas ä¸Šä¸‹æ–‡æ ¼å¼ä¸ºé¦–é€‰æ ¼å¼ `navigator.gpu.getPreferredCanvasFormat()`
- æ”¯æŒé€æ˜åº¦æ··åˆæ¨¡å¼ `alphaMode: 'premultiplied'`

### 2. TextureLoaderï¼ˆçº¹ç†åŠ è½½å™¨ï¼‰

**ä½ç½®**: `src/scenes/webgpu/TextureLoader.ts`

**èŒè´£**:
- åŠ è½½å›¾ç‰‡èµ„æºå¹¶è½¬æ¢ä¸º GPU çº¹ç†
- ç®¡ç†çº¹ç†ç¼“å­˜ï¼Œé¿å…é‡å¤åŠ è½½
- åˆ›å»ºçº¹ç†é‡‡æ ·å™¨å’Œç»‘å®šç»„

**å…³é”®æ–¹æ³•**:
- `async loadTexture(url)`: åŠ è½½å•ä¸ªçº¹ç†
- `async loadTextures(urls)`: æ‰¹é‡åŠ è½½çº¹ç†
- `createTextureBindGroup()`: åˆ›å»ºçº¹ç†ç»‘å®šç»„
- `clearCache()`: æ¸…ç†ç¼“å­˜

**æŠ€æœ¯è¦ç‚¹**:
- ä½¿ç”¨ `createImageBitmap()` åˆ›å»ºä½å›¾
- ä½¿ç”¨ `copyExternalImageToTexture()` å°†å›¾ç‰‡æ•°æ®æ‹·è´åˆ° GPU
- çº¹ç†æ ¼å¼ä¸º `rgba8unorm`
- é‡‡æ ·å™¨è®¾ç½®ä¸º `nearest` ä»¥ä¿æŒåƒç´ é£æ ¼

### 3. SpriteAnimationï¼ˆç²¾çµåŠ¨ç”»ç³»ç»Ÿï¼‰

**ä½ç½®**: `src/scenes/webgpu/SpriteAnimation.ts`

**èŒè´£**:
- ç®¡ç†åºåˆ—å¸§åŠ¨ç”»é…ç½®
- æ§åˆ¶åŠ¨ç”»æ’­æ”¾ã€æš‚åœã€åœæ­¢
- æŒ‰ç…§ 20 FPS (50ms/å¸§) æ›´æ–°åŠ¨ç”»å¸§
- æä¾›å½“å‰å¸§çº¹ç†

**å…³é”®æ–¹æ³•**:
- `addAnimation(config)`: æ·»åŠ åŠ¨ç”»é…ç½®
- `async loadAnimation(name)`: åŠ è½½åŠ¨ç”»èµ„æº
- `play(name)`: æ’­æ”¾åŠ¨ç”»
- `pause()`: æš‚åœåŠ¨ç”»
- `stop()`: åœæ­¢åŠ¨ç”»
- `update(currentTime)`: æ›´æ–°åŠ¨ç”»çŠ¶æ€
- `getCurrentTexture()`: è·å–å½“å‰å¸§çº¹ç†

**æŠ€æœ¯è¦ç‚¹**:
- å¸§ç‡å›ºå®šä¸º 20 FPSï¼Œå³æ¯å¸§é—´éš” 50ms
- ä½¿ç”¨ `performance.now()` è·å–é«˜ç²¾åº¦æ—¶é—´æˆ³
- å¾ªç¯æ’­æ”¾åŠ¨ç”»åºåˆ—
- ç‹¬ç«‹ç®¡ç†æ¯ä¸ªåŠ¨ç”»çš„çº¹ç†åºåˆ—

### 4. SpriteRendererï¼ˆç²¾çµæ¸²æŸ“å™¨ï¼‰

**ä½ç½®**: `src/scenes/webgpu/SpriteRenderer.ts`

**èŒè´£**:
- åœ¨å±å¹•ä¸Šç»˜åˆ¶ç²¾çµ
- ç®¡ç†é¡¶ç‚¹å’Œç´¢å¼•ç¼“å†²åŒº
- åˆ›å»ºå’Œé…ç½®æ¸²æŸ“ç®¡çº¿

**å…³é”®æŠ€æœ¯**:

#### WGSL ç€è‰²å™¨
é¡¹ç›®ä½¿ç”¨ WebGPU çš„ç€è‰²å™¨è¯­è¨€ WGSL (WebGPU Shading Language)ï¼š

**é¡¶ç‚¹ç€è‰²å™¨**:
```wgsl
@vertex
fn vs_main(input: VertexInput) -> VertexOutput {
  var output: VertexOutput;
  output.position = vec4f(input.position, 0.0, 1.0);
  output.texCoord = input.texCoord;
  return output;
}
```

**ç‰‡æ®µç€è‰²å™¨**:
```wgsl
@fragment
fn fs_main(@location(0) texCoord: vec2f) -> @location(0) vec4f {
  return textureSample(myTexture, mySampler, texCoord);
}
```

#### é¡¶ç‚¹æ•°æ®
- ä½¿ç”¨çŸ©å½¢ç½‘æ ¼ (4ä¸ªé¡¶ç‚¹, 2ä¸ªä¸‰è§’å½¢)
- æ¯ä¸ªé¡¶ç‚¹åŒ…å«: ä½ç½® (x, y) å’Œçº¹ç†åæ ‡ (u, v)
- ä½¿ç”¨ç´¢å¼•ç¼“å†²åŒºä¼˜åŒ–æ¸²æŸ“

**å…³é”®æ–¹æ³•**:
- `init()`: åˆå§‹åŒ–ç¼“å†²åŒºå’Œç®¡çº¿
- `render(texture)`: æ¸²æŸ“ç²¾çµçº¹ç†

### 5. CharacterControllerï¼ˆè§’è‰²æ§åˆ¶å™¨ï¼‰

**ä½ç½®**: `src/scenes/webgpu/CharacterController.ts`

**èŒè´£**:
- ç»Ÿä¸€ç®¡ç†æ‰€æœ‰è§’è‰²å’ŒåŠ¨ç”»
- æ•´åˆ Rendererã€TextureLoaderã€SpriteAnimationã€SpriteRenderer
- æä¾›ç®€å•çš„ API æ¥å£
- ç®¡ç†æ¸²æŸ“å¾ªç¯

**å…³é”®æ–¹æ³•**:
- `async init()`: åˆå§‹åŒ–æ‰€æœ‰å­ç³»ç»Ÿ
- `registerCharacter(config)`: æ³¨å†Œè§’è‰²é…ç½®
- `async loadCharacter(name)`: åŠ è½½è§’è‰²æ‰€æœ‰åŠ¨ç”»
- `playAnimation(name)`: æ’­æ”¾æŒ‡å®šåŠ¨ç”»
- `pauseAnimation()`: æš‚åœå½“å‰åŠ¨ç”»
- `stopAnimation()`: åœæ­¢åŠ¨ç”»
- `getAnimationStatus()`: è·å–åŠ¨ç”»çŠ¶æ€ä¿¡æ¯

**å·¥ä½œæµç¨‹**:
1. åˆ›å»º Renderer å®ä¾‹
2. è°ƒç”¨ `init()` åˆå§‹åŒ– WebGPU
3. åˆå§‹åŒ–æˆåŠŸååˆ›å»º TextureLoaderã€SpriteAnimationã€SpriteRenderer
4. æ³¨å†Œè§’è‰²é…ç½®ï¼ˆåŒ…å«æ‰€æœ‰åŠ¨ç”»ä¿¡æ¯ï¼‰
5. åŠ è½½è§’è‰²èµ„æºï¼ˆæ‰¹é‡åŠ è½½æ‰€æœ‰åŠ¨ç”»å¸§ï¼‰
6. æ’­æ”¾åŠ¨ç”»æ—¶å¯åŠ¨æ¸²æŸ“å¾ªç¯
7. æ¯å¸§æ›´æ–°åŠ¨ç”»çŠ¶æ€å¹¶æ¸²æŸ“å½“å‰å¸§

**é‡è¦æç¤º**: å¿…é¡»å…ˆè°ƒç”¨ `init()` åˆå§‹åŒ– WebGPU åï¼Œæ‰èƒ½åˆ›å»ºä¾èµ– GPU è®¾å¤‡çš„ç»„ä»¶ï¼ˆå¦‚ TextureLoaderï¼‰ã€‚

## èµ„æºåŒ…ç»“æ„

### è§’è‰²ç›®å½•ç»“æ„
```
src/sprites/
â”œâ”€â”€ 1-Player-Bomb Guy/
â”‚   â”œâ”€â”€ 1-Idle/          # å¾…æœºåŠ¨ç”» (26å¸§)
â”‚   â”œâ”€â”€ 2-Run/           # è·‘æ­¥åŠ¨ç”» (14å¸§)
â”‚   â”œâ”€â”€ 3-Jump Anticipation/  # è·³è·ƒå‡†å¤‡ (1å¸§)
â”‚   â”œâ”€â”€ 4-Jump/          # è·³è·ƒåŠ¨ç”» (4å¸§)
â”‚   â””â”€â”€ ...
â”œâ”€â”€ 2-Enemy-Bald Pirate/
â”‚   â”œâ”€â”€ 1-Idle/          # å¾…æœºåŠ¨ç”» (34å¸§)
â”‚   â”œâ”€â”€ 2-Run/           # è·‘æ­¥åŠ¨ç”» (14å¸§)
â”‚   â””â”€â”€ ...
â””â”€â”€ 3-Enemy-Cucumber/
    â”œâ”€â”€ 1-Idle/          # å¾…æœºåŠ¨ç”» (36å¸§)
    â””â”€â”€ ...
```

### å¯ç”¨è§’è‰²

é¡¹ç›®æ”¯æŒä»¥ä¸‹ 6 ä¸ªè§’è‰²ï¼Œå…±è®¡ 68 ç§åŠ¨ç”»ï¼š

#### 1. Player (Bomb Guy) - ç©å®¶è§’è‰²
**11 ç§åŠ¨ç”»**:
- Idle (å¾…æœº) - 26å¸§
- Run (è·‘æ­¥) - 14å¸§
- Jump Anticipation (è·³è·ƒå‡†å¤‡) - 1å¸§
- Jump (è·³è·ƒ) - 4å¸§
- Fall (ä¸‹è½) - 2å¸§
- Ground (ç€é™†) - 3å¸§
- Hit (å—å‡») - 8å¸§
- Dead Hit (ç©ºä¸­æ­»äº¡) - 6å¸§
- Dead Ground (ç€é™†æ­»äº¡) - 4å¸§
- Door In (è¿›é—¨) - 16å¸§
- Door Out (å‡ºé—¨) - 16å¸§

#### 2. Bald Pirate - å…‰å¤´æµ·ç›—æ•Œäºº
**10 ç§åŠ¨ç”»**:
- Idle (å¾…æœº) - 34å¸§
- Run (è·‘æ­¥) - 14å¸§
- Jump Anticipation (è·³è·ƒå‡†å¤‡) - 1å¸§
- Jump (è·³è·ƒ) - 4å¸§
- Fall (ä¸‹è½) - 2å¸§
- Ground (ç€é™†) - 3å¸§
- Attack (æ”»å‡») - 12å¸§
- Hit (å—å‡») - 8å¸§
- Dead Hit (ç©ºä¸­æ­»äº¡) - 6å¸§
- Dead Ground (ç€é™†æ­»äº¡) - 4å¸§

#### 3. Cucumber - é»„ç“œæ•Œäºº
**11 ç§åŠ¨ç”»**:
- Idle (å¾…æœº) - 36å¸§
- Run (è·‘æ­¥) - 12å¸§
- Jump Anticipation (è·³è·ƒå‡†å¤‡) - 1å¸§
- Jump (è·³è·ƒ) - 4å¸§
- Fall (ä¸‹è½) - 2å¸§
- Ground (ç€é™†) - 3å¸§
- Attack (æ”»å‡») - 11å¸§
- Blow Wick (å¹ç­å¼•çº¿) - 11å¸§ â­ ç‰¹è‰²åŠ¨ç”»
- Hit (å—å‡») - 8å¸§
- Dead Hit (ç©ºä¸­æ­»äº¡) - 6å¸§
- Dead Ground (ç€é™†æ­»äº¡) - 4å¸§

#### 4. Big Guy - å¤§å—å¤´æ•Œäºº
**14 ç§åŠ¨ç”»** (æœ€å¤šåŠ¨ç”»çš„è§’è‰²):
- Idle (å¾…æœº) - 38å¸§
- Run (è·‘æ­¥) - 16å¸§
- Jump Anticipation (è·³è·ƒå‡†å¤‡) - 1å¸§
- Jump (è·³è·ƒ) - 4å¸§
- Fall (ä¸‹è½) - 2å¸§
- Ground (ç€é™†) - 3å¸§
- Attack (æ”»å‡») - 11å¸§
- Pick Bomb (æ¡èµ·ç‚¸å¼¹) - 8å¸§ â­ ç‰¹è‰²åŠ¨ç”»
- Idle Bomb (æŒå¼¹å¾…æœº) - 1å¸§ â­ ç‰¹è‰²åŠ¨ç”»
- Run Bomb (æŒå¼¹è·‘æ­¥) - 16å¸§ â­ ç‰¹è‰²åŠ¨ç”»
- Throw Bomb (æŠ•æ·ç‚¸å¼¹) - 11å¸§ â­ ç‰¹è‰²åŠ¨ç”»
- Hit (å—å‡») - 8å¸§
- Dead Hit (ç©ºä¸­æ­»äº¡) - 6å¸§
- Dead Ground (ç€é™†æ­»äº¡) - 4å¸§

#### 5. Captain - èˆ¹é•¿æ•Œäºº
**11 ç§åŠ¨ç”»**:
- Idle (å¾…æœº) - 32å¸§
- Run (è·‘æ­¥) - 14å¸§
- Jump Anticipation (è·³è·ƒå‡†å¤‡) - 1å¸§
- Jump (è·³è·ƒ) - 4å¸§
- Fall (ä¸‹è½) - 2å¸§
- Ground (ç€é™†) - 3å¸§
- Attack (æ”»å‡») - 7å¸§
- Scare Run (ææƒ§é€ƒè·‘) - 12å¸§ â­ ç‰¹è‰²åŠ¨ç”»
- Hit (å—å‡») - 8å¸§
- Dead Hit (ç©ºä¸­æ­»äº¡) - 6å¸§
- Dead Ground (ç€é™†æ­»äº¡) - 4å¸§

#### 6. Whale - é²¸é±¼æ•Œäºº
**11 ç§åŠ¨ç”»**:
- Idle (å¾…æœº) - 44å¸§ (æœ€é•¿çš„å¾…æœºåŠ¨ç”»)
- Run (è·‘æ­¥) - 14å¸§
- Jump Anticipation (è·³è·ƒå‡†å¤‡) - 1å¸§
- Jump (è·³è·ƒ) - 4å¸§
- Fall (ä¸‹è½) - 2å¸§
- Ground (ç€é™†) - 3å¸§
- Attack (æ”»å‡») - 11å¸§
- Swallow Bomb (åå™¬ç‚¸å¼¹) - 10å¸§ â­ ç‰¹è‰²åŠ¨ç”»
- Hit (å—å‡») - 7å¸§
- Dead Hit (ç©ºä¸­æ­»äº¡) - 6å¸§
- Dead Ground (ç€é™†æ­»äº¡) - 4å¸§

### åŠ¨ç”»é…ç½®

æ¯ä¸ªè§’è‰²åŒ…å«å¤šä¸ªåŠ¨ç”»ï¼Œæ¯ä¸ªåŠ¨ç”»åŒ…å«ï¼š
- **name**: åŠ¨ç”»åç§°
- **folderName**: èµ„æºæ–‡ä»¶å¤¹åç§°
- **frameCount**: å¸§æ•°
- **fps**: å¸§ç‡ (å›ºå®šä¸º 20 FPS)

## ä½¿ç”¨è¯´æ˜

### 1. å®‰è£…ä¾èµ–

```bash
npm install
# æˆ–
bun install
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

### 3. æµè§ˆå™¨è¦æ±‚

- **Chrome/Edge**: ç‰ˆæœ¬ 113+ (æ¨è)
- **Firefox**: ç‰ˆæœ¬ 115+
- **Safari**: ç‰ˆæœ¬ 17+

å¿…é¡»ä½¿ç”¨æ”¯æŒ WebGPU çš„ç°ä»£æµè§ˆå™¨ã€‚

### 4. ä½¿ç”¨ç•Œé¢

åº”ç”¨ç•Œé¢åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š

#### å·¦ä¾§ - Canvas æ¸²æŸ“åŒºåŸŸ
- 800x800 åƒç´ çš„ç”»å¸ƒ
- é»‘è‰²èƒŒæ™¯
- æ˜¾ç¤ºå½“å‰æ’­æ”¾çš„åŠ¨ç”»

#### å³ä¾§ - æ§åˆ¶é¢æ¿

**1. é€‰æ‹©è§’è‰²**
- Player (Bomb Guy) - ç©å®¶è§’è‰²
- Enemy (Bald Pirate) - å…‰å¤´æµ·ç›—
- Enemy (Cucumber) - é»„ç“œæ•Œäºº
- Enemy (Big Guy) - å¤§å—å¤´æ•Œäºº
- Enemy (Captain) - èˆ¹é•¿æ•Œäºº
- Enemy (Whale) - é²¸é±¼æ•Œäºº
- ğŸ’¡ å¯ä»¥åœ¨æ’­æ”¾æ—¶åˆ‡æ¢è§’è‰²ï¼Œæ–°è§’è‰²ä¼šè‡ªåŠ¨æ’­æ”¾ç¬¬ä¸€ä¸ªåŠ¨ç”»

**2. é€‰æ‹©åŠ¨ç”»**
- ç‚¹å‡»ä»»æ„åŠ¨ç”»æŒ‰é’®æ’­æ”¾è¯¥åŠ¨ç”»
- ğŸ’¡ å¯ä»¥åœ¨æ’­æ”¾æ—¶åˆ‡æ¢åŠ¨ç”»ï¼Œå®ç°åŠ¨ç”»æ— ç¼åˆ‡æ¢
- å½“å‰é€‰ä¸­çš„åŠ¨ç”»ä¼šé«˜äº®æ˜¾ç¤º

**3. æ’­æ”¾æ§åˆ¶**
- â–¶ æ’­æ”¾: å¼€å§‹/ç»§ç»­æ’­æ”¾åŠ¨ç”»
- â¸ æš‚åœ: æš‚åœå½“å‰åŠ¨ç”»
- â¹ åœæ­¢: åœæ­¢åŠ¨ç”»å¹¶é‡ç½®åˆ°ç¬¬ä¸€å¸§

**4. åŠ¨ç”»ä¿¡æ¯**
- å½“å‰åŠ¨ç”»åç§°
- å½“å‰å¸§/æ€»å¸§æ•°
- å¸§ç‡: 20 FPS
- æ’­æ”¾çŠ¶æ€

## API æ¥å£è¯´æ˜

### CharacterController ä¸»è¦ API

```typescript
// 1. åˆ›å»ºæ§åˆ¶å™¨
const canvas = document.querySelector('canvas');
const controller = new CharacterController(canvas);

// 2. åˆå§‹åŒ– WebGPUï¼ˆå¿…é¡»å…ˆåˆå§‹åŒ–ï¼ï¼‰
const success = await controller.init();
if (!success) {
  console.error('WebGPU åˆå§‹åŒ–å¤±è´¥');
  return;
}

// 3. æ³¨å†Œè§’è‰²
controller.registerCharacter({
  name: 'Player',
  basePath: '/src/sprites/1-Player-Bomb Guy',
  animations: [
    { name: 'Idle', folderName: '1-Idle', frameCount: 26 }
  ]
});

// 4. åŠ è½½è§’è‰²
await controller.loadCharacter('Player');

// 5. æ’­æ”¾åŠ¨ç”»
controller.playAnimation('Idle');

// 6. æš‚åœåŠ¨ç”»
controller.pauseAnimation();

// 7. åœæ­¢åŠ¨ç”»
controller.stopAnimation();

// 8. è·å–çŠ¶æ€
const status = controller.getAnimationStatus();
// {
//   isPlaying: true,
//   currentAnimation: 'Player_Idle',
//   currentFrame: 5,
//   totalFrames: 26
// }
```

## æ€§èƒ½ä¼˜åŒ–

### 1. çº¹ç†ç¼“å­˜
- æ‰€æœ‰åŠ è½½çš„çº¹ç†éƒ½ä¼šè¢«ç¼“å­˜
- é¿å…é‡å¤åŠ è½½ç›¸åŒèµ„æº
- æ”¯æŒæ‰‹åŠ¨æ¸…ç†ç¼“å­˜

### 2. æ¸²æŸ“ä¼˜åŒ–
- ä½¿ç”¨ requestAnimationFrame åŒæ­¥åˆ·æ–°ç‡
- åªåœ¨åŠ¨ç”»æ’­æ”¾æ—¶æ¸²æŸ“
- æš‚åœæ—¶è‡ªåŠ¨åœæ­¢æ¸²æŸ“å¾ªç¯

### 3. GPU èµ„æºç®¡ç†
- ä½¿ç”¨ç´¢å¼•ç¼“å†²åŒºå‡å°‘é¡¶ç‚¹æ•°æ®
- çº¹ç†é‡‡æ ·å™¨ä½¿ç”¨ nearest è¿‡æ»¤ï¼ˆåƒç´ é£æ ¼ï¼‰
- é¡¶ç‚¹ç¼“å†²åŒºé¢„åˆ›å»ºï¼Œé¿å…æ¯å¸§é‡å»º

## æŠ€æœ¯äº®ç‚¹

### 1. ç°ä»£å›¾å½¢ API
- ä½¿ç”¨æœ€æ–°çš„ WebGPU æŠ€æœ¯
- å®Œå…¨åˆ©ç”¨ GPU ç¡¬ä»¶åŠ é€Ÿ
- æ”¯æŒé«˜æ€§èƒ½æ¸²æŸ“

### 2. æ¶æ„è®¾è®¡
- æ¸…æ™°çš„æ¨¡å—åˆ†å±‚
- å•ä¸€èŒè´£åŸåˆ™
- æ˜“äºæ‰©å±•å’Œç»´æŠ¤

### 3. ç±»å‹å®‰å…¨
- å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
- æ›´å¥½çš„ IDE æ”¯æŒ

### 4. å“åº”å¼ UI
- ä½¿ç”¨ Solid.js å®ç°é«˜æ€§èƒ½ UI
- ç»†ç²’åº¦å“åº”å¼æ›´æ–°
- æµç•…çš„ç”¨æˆ·ä½“éªŒ

### 5. æ™ºèƒ½äº¤äº’
- æ”¯æŒæ’­æ”¾æ—¶æ— ç¼åˆ‡æ¢è§’è‰²å’ŒåŠ¨ç”»
- è‡ªåŠ¨åœæ­¢æ—§åŠ¨ç”»å¹¶å¯åŠ¨æ–°åŠ¨ç”»
- é¿å…é‡å¤åŠ è½½å·²åŠ è½½çš„è§’è‰²
- åˆ‡æ¢è§’è‰²æ—¶è‡ªåŠ¨æ’­æ”¾é¦–ä¸ªåŠ¨ç”»

## å¸¸è§é—®é¢˜

### Q: æŠ¥é”™ "Cannot read properties of undefined (reading 'createTexture')"
A: è¿™æ˜¯å› ä¸ºåœ¨ WebGPU åˆå§‹åŒ–ä¹‹å‰å°è¯•ä½¿ç”¨ GPU è®¾å¤‡ã€‚è¯·ç¡®ä¿ï¼š
1. å…ˆè°ƒç”¨ `await controller.init()` åˆå§‹åŒ– WebGPU
2. ç¡®è®¤ `init()` è¿”å› `true` è¡¨ç¤ºåˆå§‹åŒ–æˆåŠŸ
3. åªæœ‰åœ¨åˆå§‹åŒ–æˆåŠŸåæ‰èƒ½è°ƒç”¨å…¶ä»–æ–¹æ³•ï¼ˆå¦‚æ³¨å†Œè§’è‰²ã€åŠ è½½è§’è‰²ç­‰ï¼‰

### Q: ä¸ºä»€ä¹ˆåŠ¨ç”»ä¸æ˜¾ç¤ºï¼Ÿ
A: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. æµè§ˆå™¨æ˜¯å¦æ”¯æŒ WebGPU
2. å›¾ç‰‡èµ„æºè·¯å¾„æ˜¯å¦æ­£ç¡®
3. æ˜¯å¦æˆåŠŸåŠ è½½äº†è§’è‰²
4. æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
5. æ˜¯å¦å…ˆè°ƒç”¨äº† `init()` åˆå§‹åŒ–

### Q: å¦‚ä½•æ·»åŠ æ–°è§’è‰²ï¼Ÿ
A: åœ¨ `App.tsx` çš„ `characters` æ•°ç»„ä¸­æ·»åŠ æ–°é…ç½®ï¼š
```typescript
{
  name: 'NewCharacter',
  displayName: 'æ–°è§’è‰²',
  basePath: '/src/sprites/NewCharacter',
  animations: [
    { name: 'Idle', folderName: '1-Idle', frameCount: 20 }
  ]
}
```

### Q: å¦‚ä½•ä¿®æ”¹åŠ¨ç”»å¸§ç‡ï¼Ÿ
A: åœ¨ `SpriteAnimation.ts` ä¸­ä¿®æ”¹ `fps` å‚æ•°ï¼Œæˆ–åœ¨åŠ¨ç”»é…ç½®ä¸­æŒ‡å®šï¼š
```typescript
{
  name: 'FastAnimation',
  frames: [...],
  fps: 30  // 30 FPS
}
```

### Q: å¦‚ä½•è°ƒæ•´ç²¾çµå¤§å°ï¼Ÿ
A: åœ¨ `SpriteRenderer.ts` çš„é¡¶ç‚¹æ•°æ®ä¸­è°ƒæ•´é¡¶ç‚¹åæ ‡ï¼š
```typescript
const vertices = new Float32Array([
  -0.8, 0.8, 0.0, 0.0,  // ä¿®æ”¹è¿™äº›å€¼å¯ä»¥æ”¹å˜ç²¾çµå¤§å°
  0.8, 0.8, 1.0, 0.0,
  0.8, -0.8, 1.0, 1.0,
  -0.8, -0.8, 0.0, 1.0,
]);
```

## æ‰©å±•æ–¹å‘

### 1. å¤šç²¾çµæ”¯æŒ
- æ”¯æŒåŒæ—¶æ¸²æŸ“å¤šä¸ªç²¾çµ
- å®ç°ç²¾çµå±‚çº§ç®¡ç†
- æ·»åŠ å˜æ¢çŸ©é˜µï¼ˆä½ç½®ã€ç¼©æ”¾ã€æ—‹è½¬ï¼‰

### 2. åŠ¨ç”»è¿‡æ¸¡
- å®ç°åŠ¨ç”»ä¹‹é—´çš„å¹³æ»‘è¿‡æ¸¡
- æ”¯æŒåŠ¨ç”»æ··åˆ

### 3. ç‰¹æ•ˆç³»ç»Ÿ
- æ·»åŠ ç²’å­æ•ˆæœ
- å®ç°åå¤„ç†æ•ˆæœï¼ˆæ»¤é•œã€å…‰ç…§ç­‰ï¼‰

### 4. äº¤äº’å¢å¼º
- æ”¯æŒé¼ æ ‡/é”®ç›˜æ§åˆ¶
- å®ç°ç²¾çµæ‹–æ‹½
- æ·»åŠ åŠ¨ç”»é€Ÿåº¦æ§åˆ¶

### 5. èµ„æºç®¡ç†
- å®ç°èµ„æºé¢„åŠ è½½è¿›åº¦æ˜¾ç¤º
- æ·»åŠ èµ„æºæŒ‰éœ€åŠ è½½
- æ”¯æŒèµ„æºçƒ­é‡è½½

## æŠ€æœ¯å‚è€ƒ

- [WebGPU Specification](https://www.w3.org/TR/webgpu/)
- [WebGPU Shading Language (WGSL)](https://www.w3.org/TR/WGSL/)
- [Solid.js Documentation](https://www.solidjs.com/docs/latest)
- [MDN WebGPU Guide](https://developer.mozilla.org/en-US/docs/Web/API/WebGPU_API)

## è®¸å¯è¯

MIT License

---

**å¼€å‘è€…**: Perfumere
**åˆ›å»ºæ—¥æœŸ**: 2025-10-04
**ç‰ˆæœ¬**: 1.0.0
