# 选中模式详细说明

## 🎯 三种播放模式

### 1️⃣ 行选模式（Row Selection）

**功能**：点击任意网格，选中整行进行播放

**操作步骤**：
```
1. 切换到"行选模式（播放）"
2. 点击任意网格
3. 整行显示绿色高亮边框 🟢
4. 点击"播放"按钮
5. 按从左到右的顺序播放该行的所有帧
```

**视觉反馈**：
- ✅ 整行网格显示 **4px 粗绿色边框**
- ✅ 外发光效果（0-12px）
- ✅ 内发光效果
- ✅ 显示"✅ 已选中: 第 X 行"

**示例**：
```
假设有一个 5x5 网格，点击第 2 行第 3 列的网格：

❌ ❌ ❌ ❌ ❌  ← 第1行（未选中）
🟢 🟢 🟢 🟢 🟢  ← 第2行（整行高亮）
❌ ❌ ❌ ❌ ❌  ← 第3行（未选中）
❌ ❌ ❌ ❌ ❌  ← 第4行（未选中）
❌ ❌ ❌ ❌ ❌  ← 第5行（未选中）
```

---

### 2️⃣ 列选模式（Column Selection）

**功能**：点击任意网格，选中整列进行播放

**操作步骤**：
```
1. 切换到"列选模式（播放）"
2. 点击任意网格
3. 整列显示绿色高亮边框 🟢
4. 点击"播放"按钮
5. 按从上到下的顺序播放该列的所有帧
```

**视觉反馈**：
- ✅ 整列网格显示 **4px 粗绿色边框**
- ✅ 外发光效果（0-12px）
- ✅ 内发光效果
- ✅ 显示"✅ 已选中: 第 X 列"

**示例**：
```
假设有一个 5x5 网格，点击第 2 行第 3 列的网格：

❌ ❌ 🟢 ❌ ❌
❌ ❌ 🟢 ❌ ❌
❌ ❌ 🟢 ❌ ❌  ← 第3列（整列高亮）
❌ ❌ 🟢 ❌ ❌
❌ ❌ 🟢 ❌ ❌
```

---

### 3️⃣ 多选模式（Multi Selection）

**功能**：自由选择多个网格进行播放

**操作步骤（Mac）**：
```
1. 切换到"多选模式（播放）"
2. 按住 ⌘ Command 键
3. 点击第一个网格 → 选中 ✅
4. 继续按住 ⌘ Command，点击第二个网格 → 选中 ✅
5. 继续按住 ⌘ Command，点击第三个网格 → 选中 ✅
6. 继续按住 ⌘ Command，再次点击已选网格 → 取消选中 ❌
7. 松开 ⌘ Command，直接点击 → 清空其他选中，只选当前
```

**操作步骤（Windows/Linux）**：
```
1. 切换到"多选模式（播放）"
2. 按住 Ctrl 键
3. 点击第一个网格 → 选中 ✅
4. 继续按住 Ctrl，点击第二个网格 → 选中 ✅
5. 继续按住 Ctrl，点击第三个网格 → 选中 ✅
6. 继续按住 Ctrl，再次点击已选网格 → 取消选中 ❌
7. 松开 Ctrl，直接点击 → 清空其他选中，只选当前
```

**视觉反馈**：
- ✅ 每个选中的网格显示 **4px 粗绿色边框**
- ✅ 外发光效果（0-12px，脉冲动画）
- ✅ 内发光效果
- ✅ **脉冲动画**：边框持续呼吸闪烁（1.5秒周期）
- ✅ 显示"✅ 已选中: X 个网格"

**示例**：
```
假设有一个 5x5 网格，选择了 (1,1), (2,3), (4,4) 三个网格：

❌ 🟢 ❌ ❌ ❌  ← (1,1) 选中，绿色边框
❌ ❌ ❌ 🟢 ❌  ← (2,3) 选中，绿色边框
❌ ❌ ❌ ❌ ❌
❌ ❌ ❌ ❌ 🟢  ← (4,4) 选中，绿色边框
❌ ❌ ❌ ❌ ❌

显示：✅ 已选中: 3 个网格
```

---

## 🎨 视觉效果详解

### 绿色边框特征

```css
/* 4px 粗边框 */
border: 4px solid #10b981;

/* 三层阴影 */
box-shadow: 
  0 0 0 2px rgba(16, 185, 129, 0.6),      /* 外围2px光晕 */
  0 0 12px rgba(16, 185, 129, 0.5),       /* 外发光12px */
  inset 0 0 0 2px rgba(16, 185, 129, 0.3); /* 内发光2px */

/* 最高层级 */
z-index: 15;
```

### 脉冲动画（仅多选模式）

```css
@keyframes pulse {
  0%, 100% {
    /* 正常状态 */
    box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.6),
                0 0 12px rgba(16, 185, 129, 0.5);
  }
  50% {
    /* 高亮状态 */
    box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.8),
                0 0 20px rgba(16, 185, 129, 0.7);
  }
}
```

**效果**：
- 边框持续呼吸闪烁
- 1.5 秒完整周期
- 吸引注意力
- 明确标识选中状态

---

## 🔧 技术实现

### 状态管理

```typescript
// 行选模式
const [selectedRow, setSelectedRow] = createSignal<number | null>(null);

// 列选模式
const [selectedColumn, setSelectedColumn] = createSignal<number | null>(null);

// 多选模式
const [selectedCells, setSelectedCells] = createSignal<Set<string>>(new Set());
```

### 选中判断逻辑

```typescript
const isRowSelected = selectedRow() === cell.row;
const isColumnSelected = selectedColumn() === cell.col;
const isMultiSelected = selectedCells().has(`${cell.row}-${cell.col}`);
```

### 点击事件处理

```typescript
onClick={(e) => selectCell(cell.row, cell.col, e.ctrlKey || e.metaKey)}
```

**检测**：
- `e.ctrlKey` - Windows/Linux 的 Ctrl 键
- `e.metaKey` - Mac 的 Command 键

### 多选切换逻辑

```typescript
if (mode === 'multi') {
  const cellKey = `${row}-${col}`;
  const newSelected = new Set(selectedCells());
  
  if (isMultiSelect) {
    // 按住 Ctrl/Cmd
    if (newSelected.has(cellKey)) {
      newSelected.delete(cellKey); // 已选中 → 取消
    } else {
      newSelected.add(cellKey);    // 未选中 → 添加
    }
  } else {
    // 未按住 Ctrl/Cmd
    newSelected.clear();
    newSelected.add(cellKey);      // 清空其他，只选当前
  }
  
  setSelectedCells(newSelected);
}
```

---

## 📊 对比表

| 特性 | 行选模式 | 列选模式 | 多选模式 |
|------|----------|----------|----------|
| **选中范围** | 整行 | 整列 | 自由选择 |
| **点击方式** | 直接点击 | 直接点击 | Ctrl/Cmd + 点击 |
| **高亮颜色** | 绿色 🟢 | 绿色 🟢 | 绿色 🟢 |
| **边框粗细** | 4px | 4px | 4px |
| **发光效果** | ✅ | ✅ | ✅ |
| **脉冲动画** | ❌ | ❌ | ✅ |
| **取消选中** | 点击其他行 | 点击其他列 | Ctrl/Cmd + 再次点击 |
| **选中提示** | "第 X 行" | "第 X 列" | "X 个网格" |
| **播放顺序** | 从左到右 | 从上到下 | 选中顺序 |

---

## 🎮 使用场景

### 行选模式
```
场景：角色奔跑动画
- 第1行：向右奔跑（12帧）
- 第2行：向左奔跑（12帧）
- 第3行：向上奔跑（12帧）
- 第4行：向下奔跑（12帧）

操作：点击第1行，播放向右奔跑
```

### 列选模式
```
场景：状态切换动画
- 第1列：闲置 → 攻击 → 受击（垂直序列）
- 第2列：奔跑 → 跳跃 → 落地（垂直序列）

操作：点击第1列，播放状态切换
```

### 多选模式
```
场景：关键帧调试
- 选择第1帧、第5帧、第10帧
- 快速查看动画关键点
- 去掉不需要的帧
- 优化动画流畅度
```

---

## ✅ 功能清单

- ✅ 行选模式 - 整行高亮
- ✅ 列选模式 - 整列高亮
- ✅ 多选模式 - 自由选择
- ✅ Mac Command 键支持
- ✅ Windows/Linux Ctrl 键支持
- ✅ Ctrl/Cmd + 点击切换选中
- ✅ 4px 粗绿色边框
- ✅ 三层阴影效果
- ✅ 多选脉冲动画
- ✅ 实时选中状态提示
- ✅ 动画滑入效果
- ✅ 绿色主题渐变背景

---

## 🚀 总结

三种选中模式为雪碧图动画预览提供了**极致灵活**的选择方式：

1. **行选** - 适合水平排列的动画序列
2. **列选** - 适合垂直排列的动画序列
3. **多选** - 适合自由组合和调试

**绿色高亮**提供了**清晰明确**的视觉反馈，确保用户始终知道当前选中了什么。

**脉冲动画**让多选模式的网格**持续呼吸闪烁**，即使在复杂的网格中也能一眼识别。

这套系统达到了**专业级动画工具**的水准！🎨✨

